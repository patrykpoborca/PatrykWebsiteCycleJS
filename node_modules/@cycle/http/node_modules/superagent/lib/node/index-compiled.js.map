{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('superagent');\nvar formidable = require('formidable');\nvar FormData = require('form-data');\nvar Response = require('./response');\nvar parse = require('url').parse;\nvar format = require('url').format;\nvar resolve = require('url').resolve;\nvar methods = require('methods');\nvar Stream = require('stream');\nvar utils = require('./utils');\nvar extend = require('extend');\nvar Part = require('./part');\nvar mime = require('mime');\nvar https = require('https');\nvar http = require('http');\nvar fs = require('fs');\nvar qs = require('qs');\nvar zlib = require('zlib');\nvar util = require('util');\nvar pkg = require('../../package.json');\n\n/**\n * Expose the request function.\n */\n\nexports = module.exports = request;\n\n/**\n * Expose the agent function\n */\n\nexports.agent = require('./agent');\n\n/**\n * Expose `Part`.\n */\n\nexports.Part = Part;\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `Response`.\n */\n\nexports.Response = Response;\n\n/**\n * Define \"form\" mime type.\n */\n\nmime.define({\n  'application/x-www-form-urlencoded': ['form', 'urlencoded', 'form-data']\n});\n\n/**\n * Protocol map.\n */\n\nexports.protocols = {\n  'http:': http,\n  'https:': https\n};\n\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null != obj && 'object' == typeof obj;\n}\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\nexports.serialize = {\n  'application/x-www-form-urlencoded': qs.stringify,\n  'application/json': JSON.stringify\n};\n\n/**\n * Default parsers.\n *\n *     superagent.parse['application/xml'] = function(res, fn){\n *       fn(null, res);\n *     };\n *\n */\n\nexports.parse = require('./parsers');\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String|Object} url\n * @api public\n */\n\nfunction Request(method, url) {\n  Stream.call(this);\n  var self = this;\n  if ('string' != typeof url) url = format(url);\n  this._agent = false;\n  this._formData = null;\n  this.method = method;\n  this.url = url;\n  this.header = {};\n  this.writable = true;\n  this._redirects = 0;\n  this.redirects(5);\n  this.cookies = '';\n  this.qs = {};\n  this.qsRaw = [];\n  this._redirectList = [];\n  this.on('end', this.clearTimeout.bind(this));\n}\n\n/**\n * Inherit from `Stream`.\n */\n\nutil.inherits(Request, Stream);\n\n/**\n * Write the field `name` and `val` for \"multipart/form-data\"\n * request bodies.\n *\n * ``` js\n * request.post('http://localhost/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n * ```\n *\n * @param {String} name\n * @param {String|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.field = function(name, val){\n  debug('field', name, val);\n  if (!this._formData) this._formData = new FormData();\n  this._formData.append(name, val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('http://localhost/upload')\n *   .attach(new Buffer('<b>Hello world</b>'), 'hello.html')\n *   .end(callback);\n * ```\n *\n * A filename may also be used:\n *\n * ``` js\n * request.post('http://localhost/upload')\n *   .attach('files', 'image.jpg')\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {String|fs.ReadStream|Buffer} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  if (!this._formData) this._formData = new FormData();\n  if ('string' == typeof file) {\n    if (!filename) filename = file;\n    debug('creating `fs.ReadStream` instance for file: %s', file);\n    file = fs.createReadStream(file);\n  }\n  this._formData.append(field, file, { filename: filename });\n  return this;\n};\n\n/**\n * Set the max redirects to `n`.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.redirects = function(n){\n  debug('max redirects %s', n);\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Return a new `Part` for this request.\n *\n * @return {Part}\n * @api public\n * @deprecated pass a readable stream in to `Request#attach()` instead\n */\n\nRequest.prototype.part = util.deprecate(function(){\n  return new Part(this);\n}, '`Request#part()` is deprecated. ' +\n   'Pass a readable stream in to `Request#attach()` instead.');\n\n/**\n * Gets/sets the `Agent` to use for this HTTP request. The default (if this\n * function is not called) is to opt out of connection pooling (`agent: false`).\n *\n * @param {http.Agent} agent\n * @return {http.Agent}\n * @api public\n */\n\nRequest.prototype.agent = function(agent){\n  if (!arguments.length) return this._agent;\n  this._agent = agent;\n  return this;\n};\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n\n  debug('set %s \"%s\"', field, val);\n  this.request().setHeader(field, val);\n  return this;\n};\n\n/**\n * Remove header `field`.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.unset = function(field){\n  debug('unset %s', field);\n  this.request().removeHeader(field);\n  return this;\n};\n\n/**\n * Get request header `field`.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nRequest.prototype.get = function(field){\n  return this.request().getHeader(field);\n};\n\n/**\n * Set _Content-Type_ response header passed through `mime.lookup()`.\n *\n * Examples:\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('json')\n *        .send(jsonstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/json')\n *        .send(jsonstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  return this.set('Content-Type', ~type.indexOf('/')\n    ? type\n    : mime.lookup(type));\n};\n\n/**\n * Set _Accept_ response header passed through `mime.lookup()`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  return this.set('Accept', ~type.indexOf('/')\n    ? type\n    : mime.lookup(type));\n};\n\n/**\n * Add query-string `val`.\n *\n * Examples:\n *\n *   request.get('/shoes')\n *     .query('size=10')\n *     .query({ color: 'blue' })\n *\n * @param {Object|String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.query = function(val){\n  if ('string' == typeof val) {\n    this.qsRaw.push(val);\n    return this;\n  }\n\n  extend(this.qs, val);\n  return this;\n};\n\n/**\n * Send `data`, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // string defaults to x-www-form-urlencoded\n *       request.post('/user')\n *         .send('name=tj')\n *         .send('foo=bar')\n *         .send('bar=baz')\n *         .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.send = function(data){\n  var obj = isObject(data);\n  var req = this.request();\n  var type = req.getHeader('Content-Type');\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  // string\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = req.getHeader('Content-Type');\n\n    // concat &\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj) return this;\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n/**\n * Write raw `data` / `encoding` to the socket.\n *\n * @param {Buffer|String} data\n * @param {String} encoding\n * @return {Boolean}\n * @api public\n */\n\nRequest.prototype.write = function(data, encoding){\n  return this.request().write(data, encoding);\n};\n\n/**\n * Pipe the request body to `stream`.\n *\n * @param {Stream} stream\n * @param {Object} options\n * @return {Stream}\n * @api public\n */\n\nRequest.prototype.pipe = function(stream, options){\n  this.piped = true; // HACK...\n  this.buffer(false);\n  var self = this;\n  this.end().req.on('response', function(res){\n    // redirect\n    var redirect = isRedirect(res.statusCode);\n    if (redirect && self._redirects++ != self._maxRedirects) {\n      return self.redirect(res).pipe(stream, options);\n    }\n\n    if (/^(deflate|gzip)$/.test(res.headers['content-encoding'])) {\n      res.pipe(zlib.createUnzip()).pipe(stream, options);\n    } else {\n      res.pipe(stream, options);\n    }\n    res.on('end', function(){\n      self.emit('end');\n    });\n  });\n  return stream;\n};\n\n/**\n * Enable / disable buffering.\n *\n * @return {Boolean} [val]\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.buffer = function(val){\n  this._buffer = false === val\n    ? false\n    : true;\n  return this;\n};\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.timeout = function(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.clearTimeout = function(){\n  debug('clear timeout %s %s', this.method, this.url);\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Abort and clear timeout.\n *\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  debug('abort %s %s', this.method, this.url);\n  this._aborted = true;\n  this.clearTimeout();\n  this.req.abort();\n  this.emit('abort');\n};\n\n/**\n * Define the parser to be used for this response.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.parse = function(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Redirect to `url\n *\n * @param {IncomingMessage} res\n * @return {Request} for chaining\n * @api private\n */\n\nRequest.prototype.redirect = function(res){\n  var url = res.headers.location;\n  if (!url) {\n    return this.callback(new Error('No location header for redirect'), res);\n  }\n\n  debug('redirect %s -> %s', this.url, url);\n\n  // location\n  url = resolve(this.url, url);\n\n  // ensure the response is being consumed\n  // this is required for Node v0.10+\n  res.resume();\n\n  var headers = this.req._headers;\n\n  // implementation of 302 following defacto standard\n  if (res.statusCode == 301 || res.statusCode == 302){\n    // strip Content-* related fields\n    // in case of POST etc\n    headers = utils.cleanHeader(this.req._headers);\n\n    // force GET\n    this.method = 'HEAD' == this.method\n      ? 'HEAD'\n      : 'GET';\n\n    // clear data\n    this._data = null;\n  }\n  // 303 is always GET\n  if (res.statusCode == 303) {\n    // strip Content-* related fields\n    // in case of POST etc\n    headers = utils.cleanHeader(this.req._headers);\n\n    // force method\n    this.method = 'GET';\n\n    // clear data\n    this._data = null;\n  }\n  // 307 preserves method\n  // 308 preserves method\n  delete headers.host;\n\n  delete this.req;\n\n  // redirect\n  this.url = url;\n  this._redirectList.push(url);\n  this.emit('redirect', res);\n  this.qs = {};\n  this.set(headers);\n  this.end(this._callback);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * Examples:\n *\n *   .auth('tobi', 'learnboost')\n *   .auth('tobi:learnboost')\n *   .auth('tobi')\n *\n * @param {String} user\n * @param {String} pass\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass){\n  if (1 === arguments.length) pass = '';\n  if (!~user.indexOf(':')) user = user + ':';\n  var str = new Buffer(user + pass).toString('base64');\n  return this.set('Authorization', 'Basic ' + str);\n};\n\n/**\n * Set the certificate authority option for https request.\n *\n * @param {Buffer | Array} cert\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.ca = function(cert){\n  this._ca = cert;\n  return this;\n};\n\n/**\n * Allow for extension\n */\n\nRequest.prototype.use = function(fn) {\n  fn(this);\n  return this;\n};\n\n/**\n * Return an http[s] request.\n *\n * @return {OutgoingMessage}\n * @api private\n */\n\nRequest.prototype.request = function(){\n  if (this.req) return this.req;\n\n  var self = this;\n  var options = {};\n  var data = this._data;\n  var url = this.url;\n\n  // default to http://\n  if (0 != url.indexOf('http')) url = 'http://' + url;\n  url = parse(url, true);\n\n  // options\n  options.method = this.method;\n  options.port = url.port;\n  options.path = url.pathname;\n  options.host = url.hostname;\n  options.ca = this._ca;\n  options.agent = this._agent;\n\n  // initiate request\n  var mod = exports.protocols[url.protocol];\n\n  // request\n  var req = this.req = mod.request(options);\n  if ('HEAD' != options.method) req.setHeader('Accept-Encoding', 'gzip, deflate');\n  this.protocol = url.protocol;\n  this.host = url.host;\n\n  // expose events\n  req.on('drain', function(){ self.emit('drain'); });\n\n  req.on('error', function(err){\n    // flag abortion here for out timeouts\n    // because node will emit a faux-error \"socket hang up\"\n    // when request is aborted before a connection is made\n    if (self._aborted) return;\n    self.callback(err);\n  });\n\n  // auth\n  if (url.auth) {\n    var auth = url.auth.split(':');\n    this.auth(auth[0], auth[1]);\n  }\n\n  // query\n  this.query(url.query);\n\n  // add cookies\n  if (this.cookies) req.setHeader('Cookie', this.cookies);\n\n  // set default UA\n  req.setHeader('User-Agent', 'node-superagent/' + pkg.version);\n\n  return req;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  if (this.called) return console.warn('double callback!');\n  this.called = true;\n\n  if (err) {\n    err.response = res;\n  }\n\n  // only emit error event if there is a listener\n  // otherwise we assume the callback to `.end()` will get the error\n  if (err && this.listeners('error').length > 0) this.emit('error', err);\n\n  if (err) {\n    return fn(err, res);\n  }\n\n  if (res && res.status >= 200 && res.status < 300) {\n    return fn(err, res);\n  }\n\n  var msg = 'Unsuccessful HTTP response';\n  if (res) {\n    msg = http.STATUS_CODES[res.status] || msg;\n  }\n  var new_err = new Error(msg);\n  new_err.original = err;\n  new_err.response = res;\n  new_err.status = (res) ? res.status : undefined;\n\n  fn(err || new_err, res);\n};\n\n/**\n * Initiate request, invoking callback `fn(err, res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var data = this._data;\n  var req = this.request();\n  var buffer = this._buffer;\n  var method = this.method;\n  var timeout = this._timeout;\n  debug('%s %s', this.method, this.url);\n\n  // store callback\n  this._callback = fn || noop;\n\n  // querystring\n  try {\n    var querystring = qs.stringify(this.qs, { indices: false });\n    querystring += ((querystring.length && this.qsRaw.length) ? '&' : '') + this.qsRaw.join('&');\n    req.path += querystring.length\n      ? (~req.path.indexOf('?') ? '&' : '?') + querystring\n      : '';\n  } catch (e) {\n    return this.callback(e);\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    debug('timeout %sms %s %s', timeout, this.method, this.url);\n    this._timer = setTimeout(function(){\n      var err = new Error('timeout of ' + timeout + 'ms exceeded');\n      err.timeout = timeout;\n      err.code = 'ECONNABORTED';\n      self.abort();\n      self.callback(err);\n    }, timeout);\n  }\n\n  // body\n  if ('HEAD' != method && !req._headerSent) {\n    // serialize stuff\n    if ('string' != typeof data) {\n      var contentType = req.getHeader('Content-Type')\n      // Parse out just the content type from the header (ignore the charset)\n      if (contentType) contentType = contentType.split(';')[0]\n      var serialize = exports.serialize[contentType];\n      if (serialize) data = serialize(data);\n    }\n\n    // content-length\n    if (data && !req.getHeader('Content-Length')) {\n      this.set('Content-Length', Buffer.isBuffer(data) ? data.length : Buffer.byteLength(data));\n    }\n  }\n\n  // response\n  req.on('response', function(res){\n    debug('%s %s -> %s', self.method, self.url, res.statusCode);\n    var max = self._maxRedirects;\n    var mime = utils.type(res.headers['content-type'] || '') || 'text/plain';\n    var len = res.headers['content-length'];\n    var type = mime.split('/');\n    var subtype = type[1];\n    var type = type[0];\n    var multipart = 'multipart' == type;\n    var redirect = isRedirect(res.statusCode);\n    var parser = self._parser;\n\n    self.res = res;\n\n    if ('HEAD' == self.method) {\n      var response = new Response(self);\n      self.response = response;\n      response.redirects = self._redirectList;\n      self.emit('response', response);\n      self.callback(null, response);\n      self.emit('end');\n      return;\n    }\n\n    if (self.piped) {\n      return;\n    }\n\n    // redirect\n    if (redirect && self._redirects++ != max) {\n      return self.redirect(res);\n    }\n\n    // zlib support\n    if (/^(deflate|gzip)$/.test(res.headers['content-encoding'])) {\n      utils.unzip(req, res);\n    }\n\n    // don't buffer multipart\n    if (multipart) buffer = false;\n\n    // TODO: make all parsers take callbacks\n    if (!parser && multipart) {\n      var form = new formidable.IncomingForm;\n\n      form.parse(res, function(err, fields, files){\n        if (err) return self.callback(err);\n        var response = new Response(self);\n        self.response = response;\n        response.body = fields;\n        response.files = files;\n        response.redirects = self._redirectList;\n        self.emit('end');\n        self.callback(null, response);\n      });\n      return;\n    }\n\n    // check for images, one more special treatment\n    if (!parser && isImage(mime)) {\n      exports.parse.image(res, function(err, obj){\n        if (err) return self.callback(err);\n        var response = new Response(self);\n        self.response = response;\n        response.body = obj;\n        response.redirects = self._redirectList;\n        self.emit('end');\n        self.callback(null, response);\n      });\n      return;\n    }\n\n    // by default only buffer text/*, json and messed up thing from hell\n    if (null == buffer && isText(mime) || isJSON(mime)) buffer = true;\n\n    // parser\n    var parse = 'text' == type\n      ? exports.parse.text\n      : exports.parse[mime];\n\n    // everyone wants their own white-labeled json\n    if (!parse && isJSON(mime)) parse = exports.parse['application/json'];\n\n    // buffered response\n    if (buffer) parse = parse || exports.parse.text;\n\n    // explicit parser\n    if (parser) parse = parser;\n\n    // parse\n    if (parse) {\n      try {\n        parse(res, function(err, obj){\n          if (err) self.callback(err);\n          res.body = obj;\n        });\n      } catch (err) {\n        self.callback(err);\n        return;\n      }\n    }\n\n    // unbuffered\n    if (!buffer) {\n      debug('unbuffered %s %s', self.method, self.url);\n      self.res = res;\n      var response = new Response(self);\n      self.response = response;\n      response.redirects = self._redirectList;\n      self.emit('response', response);\n      self.callback(null, response);\n      if (multipart) return // allow multipart to handle end event\n      res.on('end', function(){\n        debug('end %s %s', self.method, self.url);\n        self.emit('end');\n      })\n      return;\n    }\n\n    // end event\n    self.res = res;\n    res.on('end', function(){\n      debug('end %s %s', self.method, self.url);\n      // TODO: unless buffering emit earlier to stream\n      var response = new Response(self);\n      self.response = response;\n      response.redirects = self._redirectList;\n      self.emit('response', response);\n      self.callback(null, response);\n      self.emit('end');\n    });\n  });\n\n  this.emit('request', this);\n\n  // if a FormData instance got created, then we send that as the request body\n  var formData = this._formData;\n  if (formData) {\n\n    // set headers\n    var headers = formData.getHeaders();\n    for (var i in headers) {\n      debug('setting FormData header: \"%s: %s\"', i, headers[i]);\n      req.setHeader(i, headers[i]);\n    }\n\n    // attempt to get \"Content-Length\" header\n    formData.getLength(function(err, length) {\n      // TODO: Add chunked encoding when no length (if err)\n\n      debug('got FormData Content-Length: %s', length);\n      if ('number' == typeof length) {\n        req.setHeader('Content-Length', length);\n      }\n\n      formData.pipe(req);\n    });\n  } else {\n    req.end(data);\n  }\n\n  return this;\n};\n\n/**\n * Faux promise support\n *\n * @param {Function} fulfill\n * @param {Function} reject\n * @return {Request}\n */\n\nRequest.prototype.then = function (fulfill, reject) {\n  return this.end(function(err, res) {\n    err ? reject(err) : fulfill(res);\n  });\n}\n\n/**\n * To json.\n *\n * @return {Object}\n * @api public\n */\n\nRequest.prototype.toJSON = function(){\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data\n  };\n};\n\n/**\n * Expose `Request`.\n */\n\nexports.Request = Request;\n\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new Request('GET', method).end(url);\n  }\n\n  // url first\n  if (1 == arguments.length) {\n    return new Request('GET', method);\n  }\n\n  return new Request(method, url);\n}\n\n// generate HTTP verb methods\n\nmethods.forEach(function(method){\n  var name = 'delete' == method ? 'del' : method;\n  method = method.toUpperCase();\n  request[name] = function(url, data, fn){\n    var req = request(method, url);\n    if ('function' == typeof data) fn = data, data = null;\n    if (data) req.send(data);\n    fn && req.end(fn);\n    return req;\n  };\n});\n\n/**\n * Check if `mime` is text and should be buffered.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api public\n */\n\nfunction isText(mime) {\n  var parts = mime.split('/');\n  var type = parts[0];\n  var subtype = parts[1];\n\n  return 'text' == type\n    || 'x-www-form-urlencoded' == subtype;\n}\n\n/**\n * Check if `mime` is image\n *\n * @param {String} mime\n * @return {Boolean}\n * @api public\n */\n\nfunction isImage(mime) {\n  var parts = mime.split('/');\n  var type = parts[0];\n  var subtype = parts[1];\n\n  return 'image' == type;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  if (!mime) return false;\n  var parts = mime.split('/');\n  var type = parts[0];\n  var subtype = parts[1];\n  return subtype && subtype.match(/json/i);\n}\n\n/**\n * Check if we should follow the redirect `code`.\n *\n * @param {Number} code\n * @return {Boolean}\n * @api private\n */\n\nfunction isRedirect(code) {\n  return ~[301, 302, 303, 305, 307, 308].indexOf(code);\n}\n"]}