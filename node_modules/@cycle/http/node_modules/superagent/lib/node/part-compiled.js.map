{"version":3,"sources":["part.js"],"names":[],"mappings":";;;;;;;AAKA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACpC,IAAI,WAAW,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAC;;;;;;;;;;AAUzD,IAAI,IAAI,GAAG,cAAU,GAAG,EAAE;AACxB,aAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACvB,MAAI,CAAC,IAAI,GAAG,GAAG,CAAC;AAChB,MAAI,CAAC,SAAS,GAAG,KAAK,CAAC;AACvB,MAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,MAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,MAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,MAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;AAEtB,MAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;CAC5C,CAAC;AACF,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,0CAA0C,GACnE,0DAA0D,CAAC,CAAC;;;;;;AAM/D,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;;;;;;AAMjC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;;;;;;;;;;;AAWtB,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,UAAS,KAAK,EAAE,GAAG,EAAC;;;;AAIvC,QAAM,IAAI,SAAS,CAAC,sDAAsD,CAAC,CAAC;CAC7E,CAAC;;;;;;;;;;;;;;;AAeF,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,IAAI,EAAC;AAClC,MAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC/B,MAAI,CAAC,KAAK,GAAG,MAAM,CAAC;;AAEpB,SAAO,IAAI,CAAC;CACb,CAAC;;;;;;;;;;AAUF,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,IAAI,EAAC;AAClC,MAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,SAAO,IAAI,CAAC;CACb,CAAC;;;;;;;;;;;;AAYF,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,UAAS,IAAI,EAAE,QAAQ,EAAC;AAClD,MAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChB,MAAI,QAAQ,EAAE;AACZ,QAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpB,QAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;GAC3B;AACD,SAAO,IAAI,CAAC;CACb,CAAC;;;;;;;;;;AAUF,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,YAAU;AACjC,MAAI,IAAI,CAAC,SAAS,EAAE,OAAO;AAC3B,MAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;AAEtB,MAAI,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;;;AAGnE,MAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,QAAQ,EAAE,CAAC;AAC/D,MAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE;AAC3C,eAAW,EAAE,IAAI,CAAC,KAAK;AACvB,YAAQ,EAAE,IAAI,CAAC,SAAS;GACzB,CAAC,CAAC;;;AAGH,MAAI,CAAC,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC;CAC1C,CAAC;;;;;;;;;;;AAWF,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,YAAU;AAC/B,MAAI,CAAC,OAAO,EAAE,CAAC;AACf,SAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;CAC1C,CAAC","file":"part-compiled.js","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar util = require('util');\nvar mime = require('mime');\nvar FormData = require('form-data');\nvar PassThrough = require('readable-stream/passthrough');\n\n/**\n * Initialize a new `Part` for the given `req`.\n *\n * @param {Request} req\n * @api public\n * @deprecated pass a readable stream in to `Request#attach()` instead\n */\n\nvar Part = function (req) {\n  PassThrough.call(this);\n  this._req = req;\n  this._attached = false;\n  this._name = null;\n  this._type = null;\n  this._header = null;\n  this._filename = null;\n\n  this.once('pipe', this._attach.bind(this));\n};\nPart = util.deprecate(Part, 'The `Part()` constructor is deprecated. ' +\n   'Pass a readable stream in to `Request#attach()` instead.');\n\n/**\n * Inherit from `PassThrough`.\n */\n\nutil.inherits(Part, PassThrough);\n\n/**\n * Expose `Part`.\n */\n\nmodule.exports = Part;\n\n/**\n * Set header `field` to `val`.\n *\n * @param {String} field\n * @param {String} val\n * @return {Part} for chaining\n * @api public\n */\n\nPart.prototype.set = function(field, val){\n  //if (!this._header) this._header = {};\n  //this._header[field] = val;\n  //return this;\n  throw new TypeError('setting custom form-data part headers is unsupported');\n};\n\n/**\n * Set _Content-Type_ response header passed through `mime.lookup()`.\n *\n * Examples:\n *\n *     res.type('html');\n *     res.type('.html');\n *\n * @param {String} type\n * @return {Part} for chaining\n * @api public\n */\n\nPart.prototype.type = function(type){\n  var lookup = mime.lookup(type);\n  this._type = lookup;\n  //this.set('Content-Type', lookup);\n  return this;\n};\n\n/**\n * Set the \"name\" portion for the _Content-Disposition_ header field.\n *\n * @param {String} name\n * @return {Part} for chaining\n * @api public\n */\n\nPart.prototype.name = function(name){\n  this._name = name;\n  return this;\n};\n\n/**\n * Set _Content-Disposition_ header field to _attachment_ with `filename`\n * and field `name`.\n *\n * @param {String} name\n * @param {String} filename\n * @return {Part} for chaining\n * @api public\n */\n\nPart.prototype.attachment = function(name, filename){\n  this.name(name);\n  if (filename) {\n    this.type(filename);\n    this._filename = filename;\n  }\n  return this;\n};\n\n/**\n * Calls `FormData#append()` on the Request instance's FormData object.\n *\n * Gets called implicitly upon the first `write()` call, or the \"pipe\" event.\n *\n * @api private\n */\n\nPart.prototype._attach = function(){\n  if (this._attached) return;\n  this._attached = true;\n\n  if (!this._name) throw new Error('must call `Part#name()` first!');\n\n  // add `this` Stream's readable side as a stream for this Part\n  if (!this._req._formData) this._req._formData = new FormData();\n  this._req._formData.append(this._name, this, {\n    contentType: this._type,\n    filename: this._filename\n  });\n\n  // restore PassThrough's default `write()` function now that we're setup\n  this.write = PassThrough.prototype.write;\n};\n\n/**\n * Write `data` with `encoding`.\n *\n * @param {Buffer|String} data\n * @param {String} encoding\n * @return {Boolean}\n * @api public\n */\n\nPart.prototype.write = function(){\n  this._attach();\n  return this.write.apply(this, arguments);\n};\n"]}