{"version":3,"sources":["file.js"],"names":[],"mappings":"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","file":"file-compiled.js","sourcesContent":["if (global.GENTLY) require = GENTLY.hijack(require);\n\nvar util = require('util'),\n    WriteStream = require('fs').WriteStream,\n    EventEmitter = require('events').EventEmitter,\n    crypto = require('crypto');\n\nfunction File(properties) {\n  EventEmitter.call(this);\n\n  this.size = 0;\n  this.path = null;\n  this.name = null;\n  this.type = null;\n  this.hash = null;\n  this.lastModifiedDate = null;\n\n  this._writeStream = null;\n  \n  for (var key in properties) {\n    this[key] = properties[key];\n  }\n\n  if(typeof this.hash === 'string') {\n    this.hash = crypto.createHash(properties.hash);\n  } else {\n    this.hash = null;\n  }\n}\nmodule.exports = File;\nutil.inherits(File, EventEmitter);\n\nFile.prototype.open = function() {\n  this._writeStream = new WriteStream(this.path);\n};\n\nFile.prototype.toJSON = function() {\n  return {\n    size: this.size,\n    path: this.path,\n    name: this.name,\n    type: this.type,\n    mtime: this.lastModifiedDate,\n    length: this.length,\n    filename: this.filename,\n    mime: this.mime\n  };\n};\n\nFile.prototype.write = function(buffer, cb) {\n  var self = this;\n  if (self.hash) {\n    self.hash.update(buffer);\n  }\n  this._writeStream.write(buffer, function() {\n    self.lastModifiedDate = new Date();\n    self.size += buffer.length;\n    self.emit('progress', self.size);\n    cb();\n  });\n};\n\nFile.prototype.end = function(cb) {\n  var self = this;\n  if (self.hash) {\n    self.hash = self.hash.digest('hex');\n  }\n  this._writeStream.end(function() {\n    self.emit('end');\n    cb();\n  });\n};\n"]}