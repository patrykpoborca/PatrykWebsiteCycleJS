{"version":3,"sources":["test-content-transfer-encoding.js"],"names":[],"mappings":";;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAClC,IAAI,UAAU,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAC5C,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAE3B,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,UAAS,GAAG,EAAE,GAAG,EAAE;AAChD,MAAI,IAAI,GAAG,IAAI,UAAU,CAAC,YAAY,EAAE,CAAC;AACzC,MAAI,CAAC,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC;AAChC,MAAI,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY;AACzB,UAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;GAC3C,CAAC,CAAC;AACH,MAAI,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE;AAC5B,OAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACnB,OAAG,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;GACpB,CAAC,CAAC;AACH,MAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;CACjB,CAAC,CAAC;;AAEH,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,YAAW;AAC1B,MAAI,IAAI,GACN,WAAW,GACX,oEAAoE,GACpE,4CAA4C,GAC5C,gCAAgC,GAChC,WAAW,GACX,4CAA4C,GAC5C,oEAAoE,GACpE,wCAAwC,GACxC,iCAAiC,GACjC,aAAa,CAAC;;AAEhB,MAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;AACrB,UAAM,EAAE,MAAM;AACd,QAAI,EAAE,MAAM,CAAC,OAAO,EAAE,CAAC,IAAI;AAC3B,WAAO,EAAE;AACP,sBAAgB,EAAE,IAAI,CAAC,MAAM;AAC7B,oBAAc,EAAE,mCAAmC;KACpD;GACF,CAAC,CAAC;AACH,KAAG,CAAC,EAAE,CAAC,UAAU,EAAE,UAAU,GAAG,EAAE;AAChC,UAAM,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;AAClC,OAAG,CAAC,EAAE,CAAC,MAAM,EAAE,YAAY,EAAE,CAAC,CAAC;AAC/B,OAAG,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY;AACxB,YAAM,CAAC,KAAK,EAAE,CAAC;KAChB,CAAC,CAAC;GACJ,CAAC,CAAC;AACH,KAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;CACf,CAAC,CAAC","file":"test-content-transfer-encoding-compiled.js","sourcesContent":["var assert = require('assert');\nvar common = require('../common');\nvar formidable = require('../../lib/index');\nvar http = require('http');\n\nvar server = http.createServer(function(req, res) {\n  var form = new formidable.IncomingForm();\n  form.uploadDir = common.dir.tmp;\n  form.on('end', function () {\n    throw new Error('Unexpected \"end\" event');\n  });\n  form.on('error', function (e) {\n    res.writeHead(500);\n    res.end(e.message);\n  });\n  form.parse(req);\n});\n\nserver.listen(0, function() {\n  var body =\n    '--foo\\r\\n' +\n    'Content-Disposition: form-data; name=\"file1\"; filename=\"file1\"\\r\\n' +\n    'Content-Type: application/octet-stream\\r\\n' +\n    '\\r\\nThis is the first file\\r\\n' +\n    '--foo\\r\\n' +\n    'Content-Type: application/octet-stream\\r\\n' +\n    'Content-Disposition: form-data; name=\"file2\"; filename=\"file2\"\\r\\n' +\n    'Content-Transfer-Encoding: unknown\\r\\n' +\n    '\\r\\nThis is the second file\\r\\n' +\n    '--foo--\\r\\n';\n\n  var req = http.request({\n    method: 'POST',\n    port: server.address().port,\n    headers: {\n      'Content-Length': body.length,\n      'Content-Type': 'multipart/form-data; boundary=foo'\n    }\n  });\n  req.on('response', function (res) {\n    assert.equal(res.statusCode, 500);\n    res.on('data', function () {});\n    res.on('end', function () {\n      server.close();\n    });\n  });\n  req.end(body);\n});\n"]}