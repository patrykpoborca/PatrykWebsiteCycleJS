{"version":3,"sources":["test-issue-46.js"],"names":[],"mappings":";;AAAA,IAAI,IAAI,GAAS,OAAO,CAAC,MAAM,CAAC;IAC5B,UAAU,GAAG,OAAO,CAAC,iBAAiB,CAAC;IACvC,OAAO,GAAM,OAAO,CAAC,SAAS,CAAC;IAC/B,MAAM,GAAO,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEnC,IAAI,IAAI,GAAG,WAAW,CAAC;;AAEvB,IAAI,KAAK,GAAG,CACV,+DAA+D,EAC/D,oCAAoC,EACpC,2BAA2B,EAC3B,SAAS,CACV,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEb,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,UAAS,GAAG,EAAE,GAAG,EAAE;;;AAGhD,MAAI,GAAG,CAAC,MAAM,IAAI,KAAK,EAAE;AACvB,OAAG,CAAC,SAAS,CAAC,GAAG,EAAE,EAAC,cAAc,EAAE,WAAW,EAAC,CAAC,CAAC;AAClD,OAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACf,WAAO;GACR;;;AAGD,MAAI,IAAI,GAAG,IAAI,UAAU,CAAC,YAAY,EAAE,CAAC;AACzC,MAAI,CAAC,KAAK,CAAC,GAAG,EAAE,UAAS,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE;AAC3C,OAAG,CAAC,SAAS,CAAC,GAAG,EAAE,EAAC,cAAc,EAAE,YAAY,EAAC,CAAC,CAAC;AACnD,OAAG,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC,CAAC;AACpE,OAAG,CAAC,GAAG,EAAE,CAAC;GACX,CAAC,CAAC;CAEJ,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,EAAE,YAAW;;AAE5B,SAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;;AAExC,MAAI,MAAM,GAAG,IAAI;MACb,GAAG,GAAM,SAAS,GAAG,IAAI,GAAG,GAAG,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;;AAE5D,MAAI,KAAK,GAAI,CACX,EAAC,qBAAqB,EAAE,uBAAuB,EAAE,MAAM,EAAE,KAAK,EAAC,CAChE,CAAA;;AAED,MAAI,GAAG,GAAG,OAAO,CAAC,EAAC,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,SAAS,EAAE,KAAK,EAAC,EAAE,UAAS,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE;AACrF,QAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC3B,UAAM,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACpC,UAAM,CAAC,KAAK,EAAE,CAAC;GAChB,CAAC,CAAC;CAEJ,CAAC,CAAC","file":"test-issue-46-compiled.js","sourcesContent":["var http       = require('http'),\n    formidable = require('../../lib/index'),\n    request    = require('request'),\n    assert     = require('assert');\n\nvar host = 'localhost';\n\nvar index = [\n  '<form action=\"/\" method=\"post\" enctype=\"multipart/form-data\">',\n  '  <input type=\"text\" name=\"foo\" />',\n  '  <input type=\"submit\" />',\n  '</form>'\n].join(\"\\n\");\n\nvar server = http.createServer(function(req, res) {\n\n  // Show a form for testing purposes.\n  if (req.method == 'GET') {\n    res.writeHead(200, {'content-type': 'text/html'});\n    res.end(index);\n    return;\n  }\n\n  // Parse form and write results to response.\n  var form = new formidable.IncomingForm();\n  form.parse(req, function(err, fields, files) {\n    res.writeHead(200, {'content-type': 'text/plain'}); \n    res.write(JSON.stringify({err: err, fields: fields, files: files}));\n    res.end();\n  });\n\n}).listen(0, host, function() {\n\n  console.log(\"Server up and running...\");\n\n  var server = this,\n      url    = 'http://' + host + ':' + server.address().port;\n\n  var parts  = [\n    {'Content-Disposition': 'form-data; name=\"foo\"', 'body': 'bar'}\n  ]\n\n  var req = request({method: 'POST', url: url, multipart: parts}, function(e, res, body) {\n    var obj = JSON.parse(body);\n    assert.equal(\"bar\", obj.fields.foo);\n    server.close();\n  });\n\n});\n"]}